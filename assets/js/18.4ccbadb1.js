(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{609:function(s,a,e){"use strict";e.r(a);var r=e(6),t=Object(r.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#安装perf"}},[s._v("安装perf")]),e("ul",[e("li",[e("a",{attrs:{href:"#抓取dump文件"}},[s._v("抓取dump文件")])])])])])]),e("p"),s._v(" "),e("h2",{attrs:{id:"安装perf"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装perf"}},[s._v("#")]),s._v(" 安装perf")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装perf")]),s._v("\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" perf  -y\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#生成火焰图的脚本工具")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/brendangregg/FlameGraph\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"抓取dump文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#抓取dump文件"}},[s._v("#")]),s._v(" 抓取dump文件")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("perf record -o perf.data -F "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v(" -g -p "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("pgrep -x xrdp"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用perf script工具对perf.data进行解析。")]),s._v("\nperf script -i perf.data "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" perf.unfold\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将perf.unfold中的符号进行折叠。")]),s._v("\n./FlameGraph/stackcollapse-perf.pl perf.unfold "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" perf.folded\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#生成火焰图")]),s._v("\n \n\n./FlameGraph/stackcollapse-perf.pl perf_xrdp.unfold "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" perf_xrdp.folded\n./FlameGraph/stackcollapse-perf.pl perf_sesman.unfold "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" perf_sesman.folded\n\n./FlameGraph/flamegraph.pl perf_sesman.folded "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" perf_sesman.svg\n./FlameGraph/flamegraph.pl perf_xrdp.folded "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" perf_xrdp.svg\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("Xvnc :11 -rfbport "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5911")]),s._v(" -geometry 1024x768 -depth "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v(" -SecurityTypes None -pixelformat RGB888\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);